[{"title":"跨域问题后端配置，粘贴即用！","url":"/2023/06/01/跨域问题后端配置，粘贴即用！/","tags":["springboot","java","跨域","配置类"],"categories":["从头创建一个新项目可能需要的配置"]},{"title":"Mybatis-plus中，在新增或修改时，自动插入或修改某个字段值","url":"/2023/06/01/Mybatis-plus中，在新增或修改时，自动插入或修改某个字段值/","content":"\n\n\n# 一 效果\n\n在新增User表的数据时，createTime为null\n\n![image-20230531133204052](https://icepeachpicture.oss-cn-shanghai.aliyuncs.com/ice/b937d4d9b00ab747b9224b0d665d5dc0.png)\n\n使用mybatis-plus自带的save方法新增后，在数据库中有自动插入的当前时间的值\n\n![image-20230531133418819](https://icepeachpicture.oss-cn-shanghai.aliyuncs.com/ice/b38d9729833e7ebbfc80ab60f5393a6a.png)\n\n# 二 实现原理\n\n> ##  MetaObjectHandler:元数据对象处理器\n\n说明:`MetaObjectHandler接口`是mybatisPlus为我们提供的的一个扩展接口，我们可以利用这个接口在我们`插入`或者`更新`数据的时候，`为一些字段指定默认值`。\n\n> 使用场景：公共字段填充，如updateTime、createTime、createUser、updateUser等公共字段的填充。\n\n# 三 使用步骤\n\n## 1 在实体类的公共字段上添加@TableField注解\n\n1. `@TableField(fill = FieldFill.INSERT)`：表示此字段只在插入/新增操作时更新数据；\n2. `@TableField(fill = FieldFill.INSERT_UPDATE)`：表示此字段在新增和修改操作时都更新数据；\n3. `@TableField(fill = FieldFill.UPDATE)`：表示此字段只在修改操作时更新数据；\n\n如下面代码中，createTime，updateTime，createUser都会在新增时更新数据，updateTime还会在修改时更新数据\n\n```java\n@TableName(value = \"article\")\n@Data\npublic class Article implements Serializable {\n    /**\n     * id\n     */\n    @TableId(type = IdType.ASSIGN_UUID)\n    private String id;\n    /**\n     * 图片地址\n     */\n    private String pictureUrl;\n    /**\n     * 标题\n     */\n    private String title;\n    /**\n     * 创建时间\n     */\n    @TableField(fill = FieldFill.INSERT)\n    private String createTime;\n    /**\n     * 修改时间\n     */\n    @TableField(fill = FieldFill.INSERT_UPDATE)\n    private String updateTime;\n\n    /**\n     * 创建人\n     */\n    @TableField(fill = FieldFill.INSERT)\n    private String createUser;\n\n    @TableField(exist = false)\n    private static final long serialVersionUID = 1L;\n}\n```\n\n## 2 创建配置类实现`MetaObjectHandler`接口\n\n实现`MetaObjectHandler`接口，重写insertFill、updateFill方法\n\n使用接口中的setFieldValByName方法，找到我们之前的几个字段，并给字段赋值\n\n> 不要忘记@Component 注解\n\n如下代码：\n\n```java\n@Component\npublic class MyMetaObjectHandler implements MetaObjectHandler {\n    @Override\n    public void insertFill(MetaObject metaObject) {\n        this.setFieldValByName(\"createTime\", new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\").format(new Date()), metaObject);\n        this.setFieldValByName(\"updateTime\", new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\").format(new Date()), metaObject);    \n        this.setFieldValByName(\"createUser\", currrentUser.getNickname(), metaObject);\n    }\n\n    @Override\n    public void updateFill(MetaObject metaObject) {\n        this.setFieldValByName(\"updateTime\", new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\").format(new Date()), metaObject);\n\n    }\n}\n```\n\n\n\n","tags":["springboot","java","mybatis-plus"],"categories":["从头创建一个新项目可能需要的配置"]},{"title":"网站介绍","url":"/2023/05/12/网站介绍/","content":"\n> 从2022年中开始，就已经有了创建自己的博客网站的想法，那个时候就找了使用hexo创建网站的文章，但那个时候没研究过前端，进度一直卡在一开始的node安装上，折腾出一个开始页面之后就有些懈怠了，再之后就不了了之。\n\n> 后来也有几次建站的想法，但因为毕业，找工作等原因一直搁置了，直到现在。\n\n> 我的本科是机械，因为对计算机行业的兴趣，在女朋友的支持下，转行到了互联网行业，目前在南京从事java后端的岗位。\n\n> 网站使用hexo框架，主题是butterfly。\n\n>网站的主页封面是原神中的角色，宵宫，是我在这个游戏中最爱的角色。我很爱她对生活的热情，同时也希望自己能对生活抱有更多的期待。\n\n>网站的名字取自我的外号以及女朋友的外号。之后我会在这个网站持续更新技术博客以及生活中的所思所想。\n\n> 未完待续...\n","tags":["博客","网站"],"categories":["记录"]}]